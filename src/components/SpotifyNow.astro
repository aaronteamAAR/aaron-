---
import type { NowPlayingTrackResponse } from "../utils/spotify";
import { get } from "../utils/spotify";

const nowPlayingTrack = await get();
const result = (await nowPlayingTrack.json()) as NowPlayingTrackResponse;
---

<div
  class="w-[200px] text-[11px] flex items-center justify-center font-medium rounded-lg hover:bg-[#87CB49]"
>
  {
    result.isPlaying ? (
      <a
        href={result.url}
        target="_blank"
        rel="noreferrer noopener flex"
        class="flex items-center justify-around hover:text-gray-900"
      >
      <img src="https://img.icons8.com/plasticine/100/000000/spotify--v1.png"/>
        <p class="hover:text-gray-900 p-3">
          {result.title} - {result.artist}
        </p>
      </a>
    ) : (
      <a
        href="https://open.spotify.com/user/31ih675xwlhkw5h2cgxrzrm62rue?si=a0f61c70e09249a7"
        target="_blank"
        rel="noreferrer noopener flex"
        class="flex items-center justify-around hover:text-gray-900"
      >
      <img src="https://img.icons8.com/plasticine/100/000000/spotify--v1.png"/>
        <p class=" hover:text-gray-900 p-3">I'm busy not playing</p>
      </a>
    )
  }
</div>








